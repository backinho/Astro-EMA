---
import SubCategoryForm from "../form/SubCategoryForm.astro";
import SubProveedorForm from "../form/SubProveedorForm.astro";

interface Props {
    title: string;
    modalId: string;
    form: string;
    type: string;
}

const { title, modalId, form, type } = Astro.props as Props;

const modalType = type === "large" ? "modal modal-large" : "modal";

const formSection: Record<string, any> = {
    subCategoryForm: SubCategoryForm,
    subProveedorForm: SubProveedorForm,
};

const FormSection = formSection[form];
---

<div class="modal-overlay" id={modalId}>
    <div class="modal">
        <div class="modal-header">
            <h2 class="modal-title">{title}</h2>
            <button class="modal-close" id={modalId + "CloseBtn"}>
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            </button>
        </div>
        <div class="modal-body">
            <FormSection />
        </div>
        <div class="modal-footer">
            <button
                type="button"
                class="btn btn-secondary"
                id={modalId + "CancelBtn"}>Cancelar</button
            >
            <button
                type="submit"
                form={form}
                class="btn btn-primary"
                id={modalId + "SaveBtn"}>Guardar</button
            >
        </div>
    </div>
</div>

<script define:vars={{ modalId }}>
    document
        .getElementById(`${modalId}CloseBtn`)
        ?.addEventListener("click", () => {
            document.getElementById(`${modalId}`)?.classList.remove("active");
        });

    document
        .getElementById(`${modalId}CancelBtn`)
        ?.addEventListener("click", () => {
            document.getElementById(`${modalId}`)?.classList.remove("active");
        });
</script>
